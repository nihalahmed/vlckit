From 9a7988486e8cde73a81608471122ce73fb13fe40 Mon Sep 17 00:00:00 2001
From: Nihal Ahmed <nihal.cool@gmail.com>
Date: Fri, 27 Nov 2020 00:28:44 -0500
Subject: [PATCH 35/35] Updated to set http user agent as passed in

---
 lib/core.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/lib/core.c b/lib/core.c
index 5e8c614c83..408fb2563e 100644
--- a/lib/core.c
+++ b/lib/core.c
@@ -135,15 +135,9 @@ void libvlc_set_user_agent (libvlc_instance_t *p_i,
                             const char *name, const char *http)
 {
     libvlc_int_t *p_libvlc = p_i->p_libvlc_int;
-    char *str;
 
     var_SetString (p_libvlc, "user-agent", name);
-    if ((http != NULL)
-     && (asprintf (&str, "%s LibVLC/"PACKAGE_VERSION, http) != -1))
-    {
-        var_SetString (p_libvlc, "http-user-agent", str);
-        free (str);
-    }
+    var_SetString (p_libvlc, "http-user-agent", http);
 }
 
 void libvlc_set_app_id(libvlc_instance_t *p_i, const char *id,
-- 
2.24.3 (Apple Git-128)

